{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import PostThumb from\"../PostThumb\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{PROFILE_TYPES}from\"../../redux/actions/profileAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(_ref){var auth=_ref.auth,profile=_ref.profile,dispatch=_ref.dispatch,id=_ref.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(9),_useState4=_slicedToArray(_useState3,2),result=_useState4[0],setResult=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];useEffect(function(){profile.posts.forEach(function(data){if(data._id===id){setPosts(data.posts);setResult(data.result);setPage(data.page);}});},[profile.posts,id]);var handleLoadMore=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,newData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"user_posts/\".concat(id,\"?limit=\").concat(page*9),auth.token);case 3:res=_context.sent;newData=_objectSpread(_objectSpread({},res.data),{},{page:page+1,_id:id});dispatch({type:PROFILE_TYPES.UPDATE_POST,payload:newData});setLoad(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PostThumb,{posts:posts,result:result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:result,page:page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/profile/Posts.js"],"names":["React","useState","useEffect","PostThumb","LoadIcon","LoadMoreBtn","getDataAPI","PROFILE_TYPES","Posts","auth","profile","dispatch","id","posts","setPosts","result","setResult","page","setPage","load","setLoad","forEach","data","_id","handleLoadMore","token","res","newData","type","UPDATE_POST","payload"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,aAAT,KAA8B,mCAA9B,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAqC,IAAlCC,CAAAA,IAAkC,MAAlCA,IAAkC,CAA5BC,OAA4B,MAA5BA,OAA4B,CAAnBC,QAAmB,MAAnBA,QAAmB,CAATC,EAAS,MAATA,EAAS,eACvBX,QAAQ,CAAC,EAAD,CADe,wCAC1CY,KAD0C,eACnCC,QADmC,8BAErBb,QAAQ,CAAC,CAAD,CAFa,yCAE1Cc,MAF0C,eAElCC,SAFkC,8BAGzBf,QAAQ,CAAC,CAAD,CAHiB,yCAG1CgB,IAH0C,eAGpCC,OAHoC,8BAIzBjB,QAAQ,CAAC,KAAD,CAJiB,yCAI1CkB,IAJ0C,eAIpCC,OAJoC,eAMjDlB,SAAS,CAAC,UAAM,CACdQ,OAAO,CAACG,KAAR,CAAcQ,OAAd,CAAsB,SAACC,IAAD,CAAU,CAC9B,GAAIA,IAAI,CAACC,GAAL,GAAaX,EAAjB,CAAqB,CACnBE,QAAQ,CAACQ,IAAI,CAACT,KAAN,CAAR,CACAG,SAAS,CAACM,IAAI,CAACP,MAAN,CAAT,CACAG,OAAO,CAACI,IAAI,CAACL,IAAN,CAAP,CACD,CACF,CAND,EAOD,CARQ,CAQN,CAACP,OAAO,CAACG,KAAT,CAAgBD,EAAhB,CARM,CAAT,CAUA,GAAMY,CAAAA,cAAc,2FAAG,mJACrBJ,OAAO,CAAC,IAAD,CAAP,CADqB,sBAEHd,CAAAA,UAAU,sBACZM,EADY,mBACAK,IAAI,CAAG,CADP,EAE1BR,IAAI,CAACgB,KAFqB,CAFP,QAEfC,GAFe,eAMfC,OANe,gCAMAD,GAAG,CAACJ,IANJ,MAMUL,IAAI,CAAEA,IAAI,CAAG,CANvB,CAM0BM,GAAG,CAAEX,EAN/B,GAOrBD,QAAQ,CAAC,CAAEiB,IAAI,CAAErB,aAAa,CAACsB,WAAtB,CAAmCC,OAAO,CAAEH,OAA5C,CAAD,CAAR,CACAP,OAAO,CAAC,KAAD,CAAP,CARqB,sDAAH,kBAAdI,CAAAA,cAAc,2CAApB,CAUA,mBACE,oCACE,KAAC,SAAD,EAAW,KAAK,CAAEX,KAAlB,CAAyB,MAAM,CAAEE,MAAjC,EADF,CAGGI,IAAI,eACH,YAAK,GAAG,CAAEf,QAAV,CAAoB,GAAG,CAAC,YAAxB,CAAqC,SAAS,CAAC,iBAA/C,EAJJ,cAOE,KAAC,WAAD,EACE,MAAM,CAAEW,MADV,CAEE,IAAI,CAAEE,IAFR,CAGE,IAAI,CAAEE,IAHR,CAIE,cAAc,CAAEK,cAJlB,EAPF,GADF,CAgBD,CA1CD,CA4CA,cAAehB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PostThumb from \"../PostThumb\";\nimport LoadIcon from \"../../images/loading.gif\";\nimport LoadMoreBtn from \"../LoadMoreBtn\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { PROFILE_TYPES } from \"../../redux/actions/profileAction\";\n\nconst Posts = ({ auth, profile, dispatch, id }) => {\n  const [posts, setPosts] = useState([]);\n  const [result, setResult] = useState(9);\n  const [page, setPage] = useState(0);\n  const [load, setLoad] = useState(false);\n\n  useEffect(() => {\n    profile.posts.forEach((data) => {\n      if (data._id === id) {\n        setPosts(data.posts);\n        setResult(data.result);\n        setPage(data.page);\n      }\n    });\n  }, [profile.posts, id]);\n\n  const handleLoadMore = async () => {\n    setLoad(true);\n    const res = await getDataAPI(\n      `user_posts/${id}?limit=${page * 9}`,\n      auth.token\n    );\n    const newData = { ...res.data, page: page + 1, _id: id };\n    dispatch({ type: PROFILE_TYPES.UPDATE_POST, payload: newData });\n    setLoad(false);\n  };\n  return (\n    <div>\n      <PostThumb posts={posts} result={result} />\n\n      {load && (\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\n      )}\n\n      <LoadMoreBtn\n        result={result}\n        page={page}\n        load={load}\n        handleLoadMore={handleLoadMore}\n      />\n    </div>\n  );\n};\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}