{"ast":null,"code":"import{BrowserRouter as Router,Route,withRouter}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import io from'socket.io-client';import PageRender from\"./customRouter/PageRender\";import PrivateRouter from\"./customRouter/PrivateRouter\";import Login from\"./pages/login\";import Register from\"./pages/register\";import Home from\"./pages/home\";import HomePage from\"./pages/homepage\";import Alert from\"./components/alert/Alert\";import Header from\"./components/header/Header\";import StatusModal from\"./components/StatusModal\";import{refreshToken}from\"./redux/actions/authAction\";import{getPosts}from\"./redux/actions/postAction\";import{getSuggestions}from\"./redux/actions/suggestionsAction\";import{getNotifies}from\"./redux/actions/notifyAction\";import AdminDashboard from\"./pages/adminDashboard\";import{GLOBALTYPES}from\"./redux/actions/globalTypes\";import SocketClient from\"./SocketClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,status=_useSelector.status,modal=_useSelector.modal,userType=_useSelector.userType;var dispatch=useDispatch();useEffect(function(){dispatch(refreshToken());// const socket = io();\nvar socket=io.connect(window.location.hostname+':8080',{transports:[\"websocket\",\"xhr-polling\",\"htmlfile\",\"jsonp-polling\"]});dispatch({type:GLOBALTYPES.SOCKET,payload:socket});return function(){return socket.close();};},[dispatch]);useEffect(function(){if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestions(auth.token));dispatch(getNotifies(auth.token));}},[dispatch,auth.token]);useEffect(function(){if(!(\"Notification\"in window)){alert(\"This browser does not support desktop notification\");}else if(Notification.permission===\"granted\"){}else if(Notification.permission!==\"denied\"){Notification.requestPermission().then(function(permission){if(permission===\"granted\"){}});}},[]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"theme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"App \".concat((status||modal)&&\"mode\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[userType===\"user\"&&auth.token&&/*#__PURE__*/_jsx(Header,{}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:userType===\"user\"?auth.token?Home:HomePage:// : Login\n// : HomePage\nauth.token?AdminDashboard:Login}),userType===\"user\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",component:withRouter(Login)}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap_page\",children:[/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page\",component:PageRender}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page/:id\",component:PageRender})]})]})]})})]});}export default App;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/App.js"],"names":["BrowserRouter","Router","Route","withRouter","useDispatch","useSelector","useEffect","io","PageRender","PrivateRouter","Login","Register","Home","HomePage","Alert","Header","StatusModal","refreshToken","getPosts","getSuggestions","getNotifies","AdminDashboard","GLOBALTYPES","SocketClient","App","state","auth","status","modal","userType","dispatch","socket","connect","window","location","hostname","transports","type","SOCKET","payload","close","token","alert","Notification","permission","requestPermission","then"],"mappings":"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","sourcesContent":["import { BrowserRouter as Router, Route, withRouter } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport io from 'socket.io-client'\n\nimport PageRender from \"./customRouter/PageRender\";\nimport PrivateRouter from \"./customRouter/PrivateRouter\";\nimport Login from \"./pages/login\";\nimport Register from \"./pages/register\";\nimport Home from \"./pages/home\";\nimport HomePage from \"./pages/homepage\";\nimport Alert from \"./components/alert/Alert\";\nimport Header from \"./components/header/Header\";\nimport StatusModal from \"./components/StatusModal\";\nimport { refreshToken } from \"./redux/actions/authAction\";\nimport { getPosts } from \"./redux/actions/postAction\";\nimport { getSuggestions } from \"./redux/actions/suggestionsAction\";\nimport { getNotifies } from \"./redux/actions/notifyAction\";\n\nimport AdminDashboard from \"./pages/adminDashboard\";\nimport { GLOBALTYPES } from \"./redux/actions/globalTypes\";\nimport SocketClient from \"./SocketClient\";\n\nfunction App() {\n  const { auth, status, modal, userType } = useSelector((state) => state);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(refreshToken());\n\n    // const socket = io();\n    const socket = io.connect(window.location.hostname+':8080', {transports: [\"websocket\", \"xhr-polling\", \"htmlfile\", \"jsonp-polling\"]});\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket })\n    return () => socket.close()\n  }, [dispatch]);\n\n\n  useEffect(() => {\n    if (auth.token) {\n      dispatch(getPosts(auth.token));\n      dispatch(getSuggestions(auth.token));\n      dispatch(getNotifies(auth.token));\n    }\n  }, [dispatch, auth.token]);\n\n  useEffect(() => {\n    if (!(\"Notification\" in window)) {\n      alert(\"This browser does not support desktop notification\");\n    } else if (Notification.permission === \"granted\") {\n\n    } else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission().then(function (permission) {\n        if (permission === \"granted\") {\n        }\n      });\n    }\n  }, [])\n\n   \n\n  return (\n    <Router>\n      <Alert />\n      <input type=\"checkbox\" id=\"theme\" />\n      <div className={`App ${(status || modal) && \"mode\"}`}>\n        <div className=\"main\">\n          {userType === \"user\" && auth.token && <Header />}\n          {status && <StatusModal />}\n          {auth.token && <SocketClient />}\n          <Route\n            exact\n            path=\"/\"\n            component={\n              userType === \"user\"\n                ? auth.token\n                  ? Home\n                  : HomePage\n                : // : Login\n                // : HomePage\n                auth.token\n                ? AdminDashboard\n                : Login\n            }\n          />\n\n          {userType === \"user\" && (\n            <>\n              <Route exact path=\"/login\" component={withRouter(Login)} />\n              <Route exact path=\"/register\" component={Register} />\n\n              <div className=\"wrap_page\">\n                <PrivateRouter exact path=\"/:page\" component={PageRender} />\n                <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}