{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import PostCard from\"../PostCard\";import LoadIcon from\"../../images/loading.gif\";import LoadMoreBtn from\"../LoadMoreBtn\";import{getDataAPI}from\"../../utils/fetchData\";import{POST_TYPES}from\"../../redux/actions/postAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(){var _useSelector=useSelector(function(state){return state;}),homePosts=_useSelector.homePosts,auth=_useSelector.auth,theme=_useSelector.theme;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var handleLoadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoad(true);_context.next=3;return getDataAPI(\"posts?limit=\".concat(homePosts.page*9),auth.token);case 3:res=_context.sent;dispatch({type:POST_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},res.data),{},{page:homePosts.page+1})});setLoad(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleLoadMore(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[homePosts.posts.map(function(post){return/*#__PURE__*/_jsx(PostCard,{post:post,theme:theme},post._id);}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),/*#__PURE__*/_jsx(LoadMoreBtn,{result:homePosts.result,page:homePosts.page,load:load,handleLoadMore:handleLoadMore})]});};export default Posts;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/home/Posts.js"],"names":["React","useState","useSelector","useDispatch","PostCard","LoadIcon","LoadMoreBtn","getDataAPI","POST_TYPES","Posts","state","homePosts","auth","theme","dispatch","load","setLoad","handleLoadMore","page","token","res","type","GET_POSTS","payload","data","posts","map","post","_id","result"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,OAASC,UAAT,KAA2B,gCAA3B,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,kBACiBP,WAAW,CAAC,SAACQ,KAAD,QAAWA,CAAAA,KAAX,EAAD,CAD5B,CACVC,SADU,cACVA,SADU,CACCC,IADD,cACCA,IADD,CACOC,KADP,cACOA,KADP,CAElB,GAAMC,CAAAA,QAAQ,CAAIX,WAAW,EAA7B,CAFkB,cAIMF,QAAQ,CAAC,KAAD,CAJd,wCAIXc,IAJW,eAILC,OAJK,eAMlB,GAAMC,CAAAA,cAAc,0FAAG,2IACrBD,OAAO,CAAC,IAAD,CAAP,CADqB,sBAEHT,CAAAA,UAAU,uBAAgBI,SAAS,CAACO,IAAV,CAAiB,CAAjC,EAAsCN,IAAI,CAACO,KAA3C,CAFP,QAEfC,GAFe,eAGrBN,QAAQ,CAAC,CAAEO,IAAI,CAAEb,UAAU,CAACc,SAAnB,CAA8BC,OAAO,gCAAMH,GAAG,CAACI,IAAV,MAAgBN,IAAI,CAAEP,SAAS,CAACO,IAAV,CAAiB,CAAvC,EAArC,CAAD,CAAR,CACAF,OAAO,CAAC,KAAD,CAAP,CAJqB,sDAAH,kBAAdC,CAAAA,cAAc,0CAApB,CAMA,mBACE,aAAK,SAAS,CAAC,OAAf,WACGN,SAAS,CAACc,KAAV,CAAgBC,GAAhB,CAAoB,SAACC,IAAD,qBACnB,KAAC,QAAD,EAAyB,IAAI,CAAEA,IAA/B,CAAqC,KAAK,CAAEd,KAA5C,EAAec,IAAI,CAACC,GAApB,CADmB,EAApB,CADH,CAKGb,IAAI,eACH,YAAK,GAAG,CAAEV,QAAV,CAAoB,GAAG,CAAC,YAAxB,CAAqC,SAAS,CAAC,iBAA/C,EANJ,cASE,KAAC,WAAD,EACE,MAAM,CAAEM,SAAS,CAACkB,MADpB,CAEE,IAAI,CAAElB,SAAS,CAACO,IAFlB,CAGE,IAAI,CAAEH,IAHR,CAIE,cAAc,CAAEE,cAJlB,EATF,GADF,CAkBD,CA9BD,CAgCA,cAAeR,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport PostCard from \"../PostCard\";\nimport LoadIcon from \"../../images/loading.gif\";\nimport LoadMoreBtn from \"../LoadMoreBtn\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { POST_TYPES } from \"../../redux/actions/postAction\";\n\nconst Posts = () => {\n  const { homePosts, auth, theme } = useSelector((state) => state);\n  const dispatch =  useDispatch();\n\n  const [load, setLoad] = useState(false);\n\n  const handleLoadMore = async () => {\n    setLoad(true);\n    const res = await getDataAPI(`posts?limit=${homePosts.page * 9}`, auth.token);\n    dispatch({ type: POST_TYPES.GET_POSTS, payload: {...res.data, page: homePosts.page + 1 } });\n    setLoad(false);\n  };\n  return (\n    <div className=\"posts\">\n      {homePosts.posts.map((post) => (\n        <PostCard key={post._id} post={post} theme={theme} />\n      ))}\n\n      {load && (\n        <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\n      )}\n\n      <LoadMoreBtn\n        result={homePosts.result}\n        page={homePosts.page}\n        load={load}\n        handleLoadMore={handleLoadMore}\n      />\n    </div>\n  );\n};\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}