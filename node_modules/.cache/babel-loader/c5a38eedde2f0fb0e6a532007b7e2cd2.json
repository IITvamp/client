{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Avatar from\"../Avatar\";import{Link}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{Button}from\"@material-ui/core\";import FindButton from\"./FindButton\";import CommonLikedPosts from\"./CommonLikedPosts\";import{createRequest}from\"../../redux/actions/matchRequestAction\";import{getDataAPI}from\"../../utils/fetchData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AnanomUserCard=function AnanomUserCard(props){var _useSelector=useSelector(function(state){return state;}),theme=_useSelector.theme,auth=_useSelector.auth,socket=_useSelector.socket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),onEdit=_useState2[0],setOnEdit=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),match=_useState4[0],setMatch=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),received=_useState6[0],setReceived=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),sent=_useState8[0],setSent=_useState8[1];var dispatch=useDispatch();var ananomId=props.ananomId;useEffect(function(){var isRequested=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,_res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;auth.user.matches.forEach(function(item){if(item===ananomId){setMatch(true);}});if(match){_context.next=16;break;}_context.next=5;return getDataAPI(\"/request?sender=\".concat(auth.user._id,\"&&receiver=\").concat(ananomId));case 5:res=_context.sent;console.log(res);if(!res.data){_context.next=11;break;}setSent(true);_context.next=16;break;case 11:_context.next=13;return getDataAPI(\"/request?sender=\".concat(ananomId,\"&&receiver=\").concat(auth.user._id));case 13:_res=_context.sent;console.log(_res);if(_res.data){setReceived(true);}case 16:_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function isRequested(){return _ref.apply(this,arguments);};}();isRequested();},[]);var onMatchHandler=function onMatchHandler(){dispatch(createRequest({sender:auth.user._id,receiver:props.receiver,auth:auth,socket:socket,user:auth.user}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between p-2 w-100 align-items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\"//   onClick={handleCloseAll}\n,className:\"d-flex align-items-center\",style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"outer-shadow big-avatar-cover \",children:/*#__PURE__*/_jsx(Avatar,{src:\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\",size:\"big-avatar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ms-2\",style:{transform:\"translateY(-2px)\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"d-block color-c2\",children:\"Ananomous User\"})})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 outer-shadow hover-in-shadow\",onClick:function onClick(){return setOnEdit(true);},children:\"Common Interests\"}),match&&/*#__PURE__*/_jsx(Button,{children:\"Match already\"}),!match&&received&&!sent&&/*#__PURE__*/_jsx(Button,{onClick:onMatchHandler,children:\"Accept Request\"}),!match&&!received&&sent&&/*#__PURE__*/_jsx(Button,{children:\"Pending...\"}),!match&&!received&&!sent&&/*#__PURE__*/_jsx(Button,{onClick:onMatchHandler,children:\"Match Request\"}),/*#__PURE__*/_jsx(FindButton,{find:props.find,setFind:props.setFind,end:props.end,setEnd:props.setEnd,bcode:props.bcode,setBcode:props.setBcode}),onEdit&&/*#__PURE__*/_jsx(CommonLikedPosts,{setOnEdit:setOnEdit,receiver:props.receiver})]});};export default AnanomUserCard;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/AnanomousUser/AnanomUserCard.js"],"names":["React","useState","useEffect","Avatar","Link","useSelector","useDispatch","Button","FindButton","CommonLikedPosts","createRequest","getDataAPI","AnanomUserCard","props","state","theme","auth","socket","onEdit","setOnEdit","match","setMatch","received","setReceived","sent","setSent","dispatch","ananomId","isRequested","user","matches","forEach","item","_id","res","console","log","data","onMatchHandler","sender","receiver","textDecoration","transform","find","setFind","end","setEnd","bcode","setBcode"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport Avatar from \"../Avatar\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nimport FindButton from \"./FindButton\";\r\nimport CommonLikedPosts from \"./CommonLikedPosts\";\r\nimport { createRequest } from \"../../redux/actions/matchRequestAction\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\n\r\n\r\nconst AnanomUserCard = (props) => {\r\n  const { theme, auth, socket } = useSelector(state => state);\r\n  const [onEdit, setOnEdit] = useState(false);\r\n  const [match, setMatch] = useState(false);\r\n  const [received, setReceived] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const {ananomId} = props\r\n  useEffect(() => {\r\n    const isRequested = async () => {\r\n      try {\r\n        auth.user.matches.forEach((item) => {\r\n          if (item === ananomId) {\r\n            setMatch(true);\r\n          }\r\n        });\r\n        if (!match) {\r\n          const res = await getDataAPI(\r\n            `/request?sender=${auth.user._id}&&receiver=${ananomId}`\r\n          );\r\n          console.log(res);\r\n          if (res.data) {\r\n            setSent(true);\r\n          } else {\r\n            const res = await getDataAPI(\r\n              `/request?sender=${ananomId}&&receiver=${auth.user._id}`\r\n            );\r\n            console.log(res);\r\n            if (res.data) {\r\n              setReceived(true);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.log(error)\r\n      }\r\n    };\r\n    isRequested();\r\n  }, []);\r\n\r\n  const onMatchHandler = () => {\r\n    dispatch(createRequest({sender:auth.user._id, receiver:props.receiver, auth, socket,user:auth.user}))\r\n  }\r\n  return (\r\n    <div\r\n      className={`d-flex justify-content-between p-2 w-100 align-items-center`}\r\n    >\r\n      <Link\r\n        to={`/`}\r\n        //   onClick={handleCloseAll}\r\n        className=\"d-flex align-items-center\"\r\n        style={{ textDecoration: \"none\" }}\r\n      >\r\n        <div>\r\n          <div className=\"outer-shadow big-avatar-cover \">\r\n            <Avatar\r\n              src={\r\n                \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"\r\n              }\r\n              size=\"big-avatar\"\r\n            />\r\n          </div>\r\n          <div className=\"ms-2\" style={{ transform: \"translateY(-2px)\" }}>\r\n            <span className=\"d-block color-c2\">{\"Ananomous User\"}</span>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n      <button\r\n        className=\"btn-1 outer-shadow hover-in-shadow\"\r\n        onClick={() => setOnEdit(true)}\r\n      >\r\n        Common Interests\r\n      </button>\r\n      {match && <Button>Match already</Button>}\r\n      {!match && received && !sent && (\r\n        <Button onClick={onMatchHandler}>Accept Request</Button>\r\n      )}\r\n      {!match && !received && sent && <Button>Pending...</Button>}\r\n\r\n      {!match && !received && !sent && (\r\n        <Button onClick={onMatchHandler}>Match Request</Button>\r\n      )}\r\n      <FindButton\r\n        find={props.find}\r\n        setFind={props.setFind}\r\n        end={props.end}\r\n        setEnd={props.setEnd}\r\n        bcode={props.bcode}\r\n        setBcode={props.setBcode}\r\n      />\r\n\r\n      {onEdit && (\r\n        <CommonLikedPosts setOnEdit={setOnEdit} receiver={props.receiver} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnanomUserCard;\r\n"]},"metadata":{},"sourceType":"module"}