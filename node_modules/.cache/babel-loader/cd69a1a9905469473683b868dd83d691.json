{"ast":null,"code":"import _toConsumableArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GLOBALTYPES,DeleteData}from\"./globalTypes\";import{getDataAPI,patchDataAPI}from\"../../utils/fetchData\";import{imageUpload}from\"../../utils/imageUpload\";import{createNotify,removeNotify}from\"./notifyAction\";export var PROFILE_TYPES={LOADING:\"LOADING_PROFILE\",GET_USER:\"GET_PROFILE_USER\",FOLLOW:\"FOLLOW\",UNFOLLOW:\"UNFOLLOW\",GET_ID:\"GET_PROFILE_ID\",GET_POSTS:\"GET_PROFILE_POSTS\",UPDATE_POST:\"UPDATE_PROFILE_POSTS\"};export var getProfileUsers=function getProfileUsers(_ref){var id=_ref.id,auth=_ref.auth;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res,res1,users,posts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:PROFILE_TYPES.GET_ID,payload:id});_context.prev=1;dispatch({type:PROFILE_TYPES.LOADING,payload:true});res=getDataAPI(\"/user/\".concat(id),auth.token);res1=getDataAPI(\"/user_posts/\".concat(id),auth.token);_context.next=7;return res;case 7:users=_context.sent;_context.next=10;return res1;case 10:posts=_context.sent;dispatch({type:PROFILE_TYPES.GET_USER,payload:users.data});dispatch({type:PROFILE_TYPES.GET_POSTS,payload:_objectSpread(_objectSpread({},posts.data),{},{_id:id,page:2})});dispatch({type:PROFILE_TYPES.LOADING,payload:false});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var updateProfileUser=function updateProfileUser(_ref3){var userData=_ref3.userData,avatar=_ref3.avatar,auth=_ref3.auth;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var media,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(userData.fullname){_context2.next=2;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Please enter full name.\"}}));case 2:if(!(userData.fullname.length>25)){_context2.next=4;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Full name is too long.\"}}));case 4:if(!(userData.story.length>200)){_context2.next=6;break;}return _context2.abrupt(\"return\",dispatch({type:GLOBALTYPES.ALERT,payload:{error:\"Story is too long.\"}}));case 6:_context2.prev=6;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});if(!avatar){_context2.next=12;break;}_context2.next=11;return imageUpload([avatar]);case 11:media=_context2.sent;case 12:_context2.next=14;return patchDataAPI(\"user\",_objectSpread(_objectSpread({},userData),{},{avatar:avatar?media[0].url:auth.user.avatar}),auth.token);case 14:res=_context2.sent;dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread(_objectSpread({},auth.user),userData),{},{avatar:avatar?media[0].url:auth.user.avatar})})});dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](6);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[6,19]]);}));return function(_x2){return _ref4.apply(this,arguments);};}();};export var follow=function follow(_ref5){var users=_ref5.users,user=_ref5.user,auth=_ref5.auth,socket=_ref5.socket;return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var newUser,res,msg;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(users.every(function(item){return item._id!==user._id;})){newUser=_objectSpread(_objectSpread({},user),{},{followers:[].concat(_toConsumableArray(user.followers),[auth.user])});}else{users.forEach(function(item){if(item._id===user._id){newUser=_objectSpread(_objectSpread({},item),{},{followers:[].concat(_toConsumableArray(item.followers),[auth.user])});}});}dispatch({type:PROFILE_TYPES.FOLLOW,payload:newUser});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread({},auth.user),{},{following:[].concat(_toConsumableArray(auth.user.following),[newUser])})})});_context3.prev=3;_context3.next=6;return patchDataAPI(\"/user/\".concat(user._id,\"/follow\"),null,auth.token);case 6:res=_context3.sent;// todo socket\nsocket.emit(\"follow\",res.data.newUser);// todo notification\nmsg={id:auth.user._id,text:'started following you',recipients:[newUser._id],url:\"/profile/\".concat(auth.user._id)};dispatch(createNotify({msg:msg,auth:auth,socket:socket}));_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[3,12]]);}));return function(_x3){return _ref6.apply(this,arguments);};}();};export var unfollow=function unfollow(_ref7){var users=_ref7.users,user=_ref7.user,auth=_ref7.auth,socket=_ref7.socket;return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var newUser,res,msg;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(users.every(function(item){return item._id!==user._id;})){newUser=_objectSpread(_objectSpread({},user),{},{followers:DeleteData(user.followers,auth.user._id)});}else{users.forEach(function(item){if(item._id===user._id){newUser=_objectSpread(_objectSpread({},item),{},{followers:DeleteData(item.followers,auth.user._id)});}});}dispatch({type:PROFILE_TYPES.UNFOLLOW,payload:newUser});dispatch({type:GLOBALTYPES.AUTH,payload:_objectSpread(_objectSpread({},auth),{},{user:_objectSpread(_objectSpread({},auth.user),{},{following:DeleteData(auth.user.following,newUser._id)})})});_context4.prev=3;_context4.next=6;return patchDataAPI(\"/user/\".concat(user._id,\"/unfollow\"),null,auth.token);case 6:res=_context4.sent;// todo socket\nsocket.emit(\"unFollow\",res.data.newUser);// todo notification\nmsg={id:auth.user._id,text:\"started following you\",recipients:[newUser._id],url:\"/profile/\".concat(auth.user._id)};dispatch(removeNotify({msg:msg,auth:auth,socket:socket}));_context4.next=15;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[3,12]]);}));return function(_x4){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/redux/actions/profileAction.js"],"names":["GLOBALTYPES","DeleteData","getDataAPI","patchDataAPI","imageUpload","createNotify","removeNotify","PROFILE_TYPES","LOADING","GET_USER","FOLLOW","UNFOLLOW","GET_ID","GET_POSTS","UPDATE_POST","getProfileUsers","id","auth","dispatch","type","payload","res","token","res1","users","posts","data","_id","page","ALERT","error","response","msg","updateProfileUser","userData","avatar","fullname","length","story","loading","media","url","user","AUTH","success","follow","socket","every","item","newUser","followers","forEach","following","emit","text","recipients","unfollow"],"mappings":"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","sourcesContent":["import { GLOBALTYPES, DeleteData } from \"./globalTypes\";\nimport { getDataAPI, patchDataAPI } from \"../../utils/fetchData\";\nimport { imageUpload } from \"../../utils/imageUpload\";\nimport { createNotify, removeNotify } from \"./notifyAction\";\n\nexport const PROFILE_TYPES = {\n  LOADING: \"LOADING_PROFILE\",\n  GET_USER: \"GET_PROFILE_USER\",\n  FOLLOW: \"FOLLOW\",\n  UNFOLLOW: \"UNFOLLOW\",\n  GET_ID: \"GET_PROFILE_ID\",\n  GET_POSTS: \"GET_PROFILE_POSTS\",\n  UPDATE_POST: \"UPDATE_PROFILE_POSTS\",\n\n};\n\n\nexport const getProfileUsers = ({ id, auth}) => async (dispatch) => {\n\n  dispatch({type:PROFILE_TYPES.GET_ID, payload: id})\n\n    try {\n      dispatch({type: PROFILE_TYPES.LOADING, payload:true});\n      const res =  getDataAPI(`/user/${id}`, auth.token);\n      \n      const res1 =  getDataAPI(`/user_posts/${id}`, auth.token);\n\n      const users = await res;\n      const posts = await res1;\n\n      dispatch({ type: PROFILE_TYPES.GET_USER, payload: users.data });\n      dispatch({ type: PROFILE_TYPES.GET_POSTS, payload: {...posts.data, _id: id, page: 2} });\n\n      dispatch({ type: PROFILE_TYPES.LOADING, payload: false });\n      \n    } catch (err) {\n      dispatch({ type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} });\n    }\n  }\n\n\n\nexport const updateProfileUser = ({userData, avatar, auth}) => async (dispatch) => {\n  if(!userData.fullname){\n    return dispatch({type: GLOBALTYPES.ALERT, payload: {error: \"Please enter full name.\"}})\n  }\n\n  if (userData.fullname.length > 25) {\n    return dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { error: \"Full name is too long.\" },\n    });\n  }\n\n  if (userData.story.length > 200) {\n    return dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { error: \"Story is too long.\" },\n    });\n  }\n\n  try {\n    let media;\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { loading: true }\n    });\n\n    if(avatar){\n      media = await imageUpload([avatar]);\n    }\n\n    const res = await patchDataAPI(\"user\", { ...userData, avatar: avatar ? media[0].url : auth.user.avatar }, auth.token);\n\n    dispatch({\n      type: GLOBALTYPES.AUTH,\n      payload: {\n        ...auth,\n        user: {\n          ...auth.user,\n          ...userData,\n          avatar: avatar ? media[0].url : auth.user.avatar,\n        },\n      },\n    });\n   \n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { success: res.data.msg },\n    });\n\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { error: err.response.data.msg },\n    });\n  }\n\n};\n\nexport const follow = ({ users, user, auth, socket }) => async (dispatch) => {\n  let newUser;\n  if(users.every(item => item._id !== user._id )){\n    newUser = { ...user, followers: [...user.followers, auth.user] };\n  }else{\n    users.forEach(item => {\n      if(item._id === user._id){\n        newUser = { ...item, followers: [...item.followers, auth.user] };\n      }\n    })\n  }\n   \n  \n  dispatch({ type: PROFILE_TYPES.FOLLOW, payload: newUser });\n\n  dispatch({ type: GLOBALTYPES.AUTH, payload: { ...auth, user:{...auth.user, following: [...auth.user.following, newUser] } } });\n\n  \n\n  try {\n    const res = await patchDataAPI(\n      `/user/${user._id}/follow`,\n      null,\n      auth.token\n    );\n    // todo socket\n    socket.emit(\"follow\", res.data.newUser);\n\n    // todo notification\n    const msg = {\n      id: auth.user._id,\n      text: 'started following you',\n      recipients: [newUser._id],\n      url: `/profile/${auth.user._id}`,\n    };\n\n    dispatch(createNotify({ msg, auth, socket }));\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { error: err.response.data.msg },\n    });\n  }\n};\n\nexport const unfollow = ({ users, user, auth, socket }) => async (dispatch) => {\n\n    let newUser;\n    if (users.every((item) => item._id !== user._id)) {\n      newUser = {\n        ...user,\n        followers: DeleteData(user.followers, auth.user._id),\n      };\n    } else {\n      users.forEach((item) => {\n        if (item._id === user._id) {\n          newUser = {\n            ...item,\n            followers: DeleteData(item.followers, auth.user._id),\n          };\n        }\n      });\n    }\n  \n  dispatch({ type: PROFILE_TYPES.UNFOLLOW, payload: newUser });\n\n  dispatch({\n    type: GLOBALTYPES.AUTH,\n    payload: {\n      ...auth,\n      user: {\n        ...auth.user,\n        following: DeleteData(auth.user.following, newUser._id)\n      },\n    },\n  });\n\n  \n\n  try {\n    const res = await patchDataAPI(\n      `/user/${user._id}/unfollow`,\n      null,\n      auth.token\n    );\n\n    // todo socket\n    socket.emit(\"unFollow\", res.data.newUser);\n\n    // todo notification\n    const msg = {\n      id: auth.user._id,\n      text: \"started following you\",\n      recipients: [newUser._id],\n      url: `/profile/${auth.user._id}`,\n    };\n\n    dispatch(removeNotify({ msg, auth, socket }));\n    \n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: { error: err.response.data.msg },\n    });\n  }\n};"]},"metadata":{},"sourceType":"module"}