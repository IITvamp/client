{"ast":null,"code":"import _objectSpread from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import Avatar from\"../../Avatar\";import{Link,useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import moment from\"moment\";import{BASE_URL}from'../../../utils/config';import{GLOBALTYPES}from\"../../../redux/actions/globalTypes\";import{deletePost,reportPost}from\"../../../redux/actions/postAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CardHeader=function CardHeader(_ref){var post=_ref.post;var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,socket=_useSelector.socket;var dispatch=useDispatch();var history=useHistory();var handleEditPost=function handleEditPost(){dispatch({type:GLOBALTYPES.STATUS,payload:_objectSpread(_objectSpread({},post),{},{onEdit:true})});};var handleDeletePost=function handleDeletePost(){if(window.confirm(\"Are you sure?\")){dispatch(deletePost({post:post,auth:auth,socket:socket}));return history.push(\"/\");}};var handleReportPost=function handleReportPost(){dispatch(reportPost({post:post,auth:auth}));};var handleCopyLink=function handleCopyLink(){navigator.clipboard.writeText(\"\".concat(BASE_URL,\"/post/\").concat(post._id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"card_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"outer-shadow big-avatar-cover me-2\",children:/*#__PURE__*/_jsx(Avatar,{src:post.user.avatar,size:\"big-avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_name\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"m-0\",children:/*#__PURE__*/_jsx(Link,{className:\"text-dark\",to:\"/profile/\".concat(post.user._id),children:post.user.username})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:moment(post.createdAt).fromNow()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",id:\"moreLink\",\"data-bs-toggle\":\"dropdown\",children:\"more_horiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[auth.user._id===post.user._id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleEditPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-info\",children:\" create\"}),\"Edit Post\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleDeletePost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-red\",children:\" delete\"}),\"Delete Post\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleCopyLink,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-primary\",children:\"content_copy\"}),\"Copy Link\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleReportPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-yellow\",children:\"report_problem\"}),\"Report this post\"]})]})]})]});};export default CardHeader;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/home/post_card/CardHeader.js"],"names":["React","Avatar","Link","useHistory","useDispatch","useSelector","moment","BASE_URL","GLOBALTYPES","deletePost","reportPost","CardHeader","post","state","auth","socket","dispatch","history","handleEditPost","type","STATUS","payload","onEdit","handleDeletePost","window","confirm","push","handleReportPost","handleCopyLink","navigator","clipboard","writeText","_id","user","avatar","username","createdAt","fromNow"],"mappings":"uLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,QAAT,KAAyB,uBAAzB,CAEA,OAASC,WAAT,KAA4B,oCAA5B,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,mCAAvC,C,6IAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,kBACNP,WAAW,CAAC,SAACQ,KAAD,QAAWA,CAAAA,KAAX,EAAD,CADL,CACvBC,IADuB,cACvBA,IADuB,CACjBC,MADiB,cACjBA,MADiB,CAE/B,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEA,GAAMe,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BF,QAAQ,CAAC,CAAEG,IAAI,CAAEX,WAAW,CAACY,MAApB,CAA4BC,OAAO,gCAAOT,IAAP,MAAaU,MAAM,CAAE,IAArB,EAAnC,CAAD,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAGC,MAAM,CAACC,OAAP,CAAe,eAAf,CAAH,CAAmC,CACjCT,QAAQ,CAACP,UAAU,CAAC,CAAEG,IAAI,CAAJA,IAAF,CAAQE,IAAI,CAAJA,IAAR,CAAcC,MAAM,CAANA,MAAd,CAAD,CAAX,CAAR,CACA,MAAOE,CAAAA,OAAO,CAACS,IAAR,CAAa,GAAb,CAAP,CACD,CAEF,CAND,CASA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BX,QAAQ,CAACN,UAAU,CAAC,CAACE,IAAI,CAAJA,IAAD,CAAOE,IAAI,CAAJA,IAAP,CAAD,CAAX,CAAR,CACD,CAFD,CAIA,GAAMc,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BC,SAAS,CAACC,SAAV,CAAoBC,SAApB,WAAiCxB,QAAjC,kBAAkDK,IAAI,CAACoB,GAAvD,GACD,CAFD,CAIA,mBACE,aAAK,SAAS,CAAC,aAAf,wBACE,aAAK,SAAS,CAAC,QAAf,wBACE,YAAK,SAAS,CAAC,oCAAf,uBACE,KAAC,MAAD,EAAQ,GAAG,CAAEpB,IAAI,CAACqB,IAAL,CAAUC,MAAvB,CAA+B,IAAI,CAAC,YAApC,EADF,EADF,cAIE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,KAAd,uBACE,KAAC,IAAD,EAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,oBAActB,IAAI,CAACqB,IAAL,CAAUD,GAAxB,CAA9B,UACGpB,IAAI,CAACqB,IAAL,CAAUE,QADb,EADF,EADF,cAME,cAAO,SAAS,CAAC,YAAjB,UACG7B,MAAM,CAACM,IAAI,CAACwB,SAAN,CAAN,CAAuBC,OAAvB,EADH,EANF,GAJF,GADF,cAiBE,aAAK,SAAS,CAAC,mBAAf,wBACE,aACE,SAAS,CAAC,gBADZ,CAEE,EAAE,CAAC,UAFL,CAGE,iBAAe,UAHjB,wBADF,cASE,aAAK,SAAS,CAAC,eAAf,WACGvB,IAAI,CAACmB,IAAL,CAAUD,GAAV,GAAkBpB,IAAI,CAACqB,IAAL,CAAUD,GAA5B,eACC,wCACE,aAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAEd,cAAxC,wBACE,aAAM,SAAS,CAAC,0BAAhB,qBADF,eADF,cAKE,aAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAEK,gBAAxC,wBACE,aAAM,SAAS,CAAC,yBAAhB,qBADF,iBALF,GAFJ,cAcE,aAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAEK,cAAxC,wBACE,aAAM,SAAS,CAAC,6BAAhB,0BADF,eAdF,cAkBE,aAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAED,gBAAxC,wBACE,aAAM,SAAS,CAAC,4BAAhB,4BADF,sBAlBF,GATF,GAjBF,GADF,CAqDD,CA/ED,CAiFA,cAAehB,CAAAA,UAAf","sourcesContent":["import React from \"react\";\nimport Avatar from \"../../Avatar\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport { BASE_URL } from '../../../utils/config'\n\nimport { GLOBALTYPES } from \"../../../redux/actions/globalTypes\";\nimport { deletePost, reportPost } from \"../../../redux/actions/postAction\";\n\nconst CardHeader = ({ post }) => {\n  const { auth, socket } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const handleEditPost = () => {\n    dispatch({ type: GLOBALTYPES.STATUS, payload: { ...post, onEdit: true } });\n  };\n\n  const handleDeletePost = () => {\n    if(window.confirm(\"Are you sure?\")){\n      dispatch(deletePost({ post, auth, socket }));\n      return history.push(\"/\");\n    }\n    \n  };\n\n\n  const handleReportPost = () => {\n    dispatch(reportPost({post, auth}));\n  };\n\n  const handleCopyLink = () => {\n    navigator.clipboard.writeText(`${BASE_URL}/post/${post._id}`)\n  };\n\n  return (\n    <div className=\"card_header\">\n      <div className=\"d-flex\">\n        <div className=\"outer-shadow big-avatar-cover me-2\">\n          <Avatar src={post.user.avatar} size=\"big-avatar\" />\n        </div>\n        <div className=\"card_name\">\n          <h6 className=\"m-0\">\n            <Link className=\"text-dark\" to={`/profile/${post.user._id}`}>\n              {post.user.username}\n            </Link>\n          </h6>\n          <small className=\"text-muted\">\n            {moment(post.createdAt).fromNow()}\n          </small>\n        </div>\n      </div>\n\n      <div className=\"nav-item dropdown\">\n        <span\n          className=\"material-icons\"\n          id=\"moreLink\"\n          data-bs-toggle=\"dropdown\"\n        >\n          more_horiz\n        </span>\n\n        <div className=\"dropdown-menu\">\n          {auth.user._id === post.user._id && (\n            <>\n              <div className=\"dropdown-item\" onClick={handleEditPost}>\n                <span className=\"material-icons text-info\"> create</span>Edit\n                Post\n              </div>\n              <div className=\"dropdown-item\" onClick={handleDeletePost}>\n                <span className=\"material-icons text-red\"> delete</span>Delete\n                Post\n              </div>\n            </>\n          )}\n\n          <div className=\"dropdown-item\" onClick={handleCopyLink}>\n            <span className=\"material-icons text-primary\">content_copy</span>\n            Copy Link\n          </div>\n          <div className=\"dropdown-item\" onClick={handleReportPost}>\n            <span className=\"material-icons text-yellow\">report_problem</span>\n            Report this post\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CardHeader;\n"]},"metadata":{},"sourceType":"module"}