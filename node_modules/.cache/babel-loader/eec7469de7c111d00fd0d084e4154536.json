{"ast":null,"code":"import _slicedToArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getDataAPI}from\"../../../utils/fetchData\";import{acceptMatchRequest,rejectMatchRequest}from\"../../../redux/actions/matchRequestAction\";import Avatar from\"../../Avatar\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AnanomMessageCard=function AnanomMessageCard(props){var ananomId=props.ananomId,conversation=props.conversation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),request=_useState2[0],setRequest=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),match=_useState4[0],setMatch=_useState4[1];// const [accept, setAccept] = useState(false);\n// const [reject, setReject] = useState(false);\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),received=_useState6[0],setReceived=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),sent=_useState8[0],setSent=_useState8[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();useEffect(function(){var isRequested=function isRequested(){if(conversation.matchRequest){setRequest(true);}};var isMatch=function isMatch(){auth.user.matches.forEach(function(item){if(item===ananomId){setMatch(true);}});};var isSentorReceived=function isSentorReceived(){if(conversation.matchRequest){if(auth.user._id===conversation.matchRequest.sender){setSent(true);}else if(auth.user._id===conversation.matchRequest.receiver){setReceived(true);}}};// const isRejected = async () => {\n//   if (conversation._id) {\n//     const res = await getDataAPI(`request/${conversation._id}`);\n//     if (res.status !== 200) {\n//       setReject(true);\n//     }\n//   }\n// };\nisRequested();isMatch();isSentorReceived();// isRejected();\n},[]);var AcceptHandler=function AcceptHandler(){setMatch(true);dispatch(acceptMatchRequest({auth:auth,id:conversation.matchReuest._id}));};var RejectHandler=function RejectHandler(){setRequest(true);dispatch(rejectMatchRequest({auth:auth,id:conversation.matchReuest._id}));};return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between p-2 w-100 align-items-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"d-flex align-items-center\",style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"outer-shadow big-avatar-cover \",children:/*#__PURE__*/_jsx(Avatar,{src:\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\",size:\"big-avatar\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ms-2\",style:{transform:\"translateY(-2px)\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"d-block color-c2\",children:\"Ananomous User\"})}),sent&&/*#__PURE__*/_jsx(\"div\",{className:\"ms-2\",style:{transform:\"translateY(-2px)\"},children:/*#__PURE__*/_jsx(\"span\",{children:\"Pending\"})}),request&&received&&/*#__PURE__*/_jsxs(\"div\",{className:\"ms-2\",style:{transform:\"translateY(-2px)\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:AcceptHandler,children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:RejectHandler,children:\"Reject\"})]})]})})});};export default AnanomMessageCard;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/AnanomousUser/saveAnanomMessages/UserCard.js"],"names":["React","useState","useEffect","useDispatch","useSelector","getDataAPI","acceptMatchRequest","rejectMatchRequest","Avatar","Link","AnanomMessageCard","props","ananomId","conversation","request","setRequest","match","setMatch","received","setReceived","sent","setSent","state","auth","dispatch","isRequested","matchRequest","isMatch","user","matches","forEach","item","isSentorReceived","_id","sender","receiver","AcceptHandler","id","matchReuest","RejectHandler","textDecoration","transform"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../../utils/fetchData\";\r\nimport {\r\n  acceptMatchRequest,\r\n  rejectMatchRequest,\r\n} from \"../../../redux/actions/matchRequestAction\";\r\n\r\nimport Avatar from \"../../Avatar\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AnanomMessageCard = (props) => {\r\n  const { ananomId, conversation } = props;\r\n  const [request, setRequest] = useState(false);\r\n  const [match, setMatch] = useState(false);\r\n  // const [accept, setAccept] = useState(false);\r\n  // const [reject, setReject] = useState(false);\r\n  const [received, setReceived] = useState(false);\r\n  const [sent, setSent] = useState(false);\r\n  const { auth } = useSelector((state) => state);\r\n  \r\n      const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n     const isRequested = () => {\r\n       if (conversation.matchRequest) {\r\n         setRequest(true)\r\n       }\r\n     };\r\n    const isMatch = () => {\r\n      auth.user.matches.forEach((item) => {\r\n        if (item === ananomId) {\r\n          setMatch(true);\r\n        }\r\n      })\r\n    }\r\n    const isSentorReceived = () => {\r\n      if (conversation.matchRequest) {\r\n        if (auth.user._id === conversation.matchRequest.sender) {\r\n          setSent(true);\r\n        } else if (auth.user._id === conversation.matchRequest.receiver) {\r\n          setReceived(true);\r\n        }\r\n      }\r\n    }\r\n    // const isRejected = async () => {\r\n    //   if (conversation._id) {\r\n    //     const res = await getDataAPI(`request/${conversation._id}`);\r\n    //     if (res.status !== 200) {\r\n    //       setReject(true);\r\n    //     }\r\n    //   }\r\n    // };\r\n    isRequested();\r\n    isMatch();\r\n    isSentorReceived();\r\n    // isRejected();\r\n  }, []);\r\n  \r\n\r\n  const AcceptHandler = () => {\r\n    setMatch(true);\r\n    dispatch(acceptMatchRequest({auth, id:conversation.matchReuest._id}));\r\n  }\r\n\r\n  const RejectHandler = () => {\r\n    setRequest(true);\r\n    dispatch(rejectMatchRequest({auth, id:conversation.matchReuest._id}))\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`d-flex justify-content-between p-2 w-100 align-items-center`}\r\n    >\r\n      <Link\r\n        to={`/`}\r\n        className=\"d-flex align-items-center\"\r\n        style={{ textDecoration: \"none\" }}\r\n      >\r\n        <div>\r\n          <div className=\"outer-shadow big-avatar-cover \">\r\n            <Avatar\r\n              src={\r\n                \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"\r\n              }\r\n              size=\"big-avatar\"\r\n            />\r\n          </div>\r\n          <div className=\"ms-2\" style={{ transform: \"translateY(-2px)\" }}>\r\n            <span className=\"d-block color-c2\">{\"Ananomous User\"}</span>\r\n          </div>\r\n          {/* {match && (\r\n            <div className=\"ms-2\" style={{ transform: \"translateY(-2px)\" }}>\r\n              <span>Match</span>\r\n            </div>\r\n          )} */}\r\n          {sent && (\r\n            <div className=\"ms-2\" style={{ transform: \"translateY(-2px)\" }}>\r\n              <span>Pending</span>\r\n            </div>\r\n          )}\r\n          {request && received && (\r\n            <div className=\"ms-2\" style={{ transform: \"translateY(-2px)\" }}>\r\n            <button onClick={AcceptHandler}>Accept</button>\r\n            <button onClick={RejectHandler}>Reject</button>\r\n          </div>)}\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnanomMessageCard;\r\n"]},"metadata":{},"sourceType":"module"}