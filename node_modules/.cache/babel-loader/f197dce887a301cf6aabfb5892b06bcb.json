{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";// import { Link } from \"react-router-dom\";\nimport UserCard from\"../UserCard\";import LoadIcon from\"../../images/loading.gif\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth;var dispatch=useDispatch();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(search){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.prev=3;setLoad(true);_context.next=7;return getDataAPI(\"search?username=\".concat(search),auth.token);case 7:res=_context.sent;setUsers(res.data.users);setLoad(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){setSearch(\"\");setUsers([]);};return/*#__PURE__*/_jsxs(\"form\",{className:\"search_form\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",title:\"Enter to Search\",name:\"search\",value:search,id:\"search\",onChange:function onChange(e){return setSearch(e.target.value.toLowerCase().replace(/ /g,\" \"));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_icon\",style:{opacity:search?0:0.3},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Enter to Search\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:handleClose,className:\"close_search\",style:{opacity:users.length===0?0:1},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:\"none\"},children:\"Search\"}),load&&/*#__PURE__*/_jsx(\"img\",{className:\"loading\",src:LoadIcon,alt:\"Loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:search&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,border:\"border\",handleClose:handleClose},user._id);})})]});};export default Search;","map":{"version":3,"sources":["C:/Users/ayush/Desktop/myProjects/mern-social-media-master/client/src/components/header/Search.js"],"names":["React","useState","useDispatch","useSelector","getDataAPI","GLOBALTYPES","UserCard","LoadIcon","Search","search","setSearch","users","setUsers","state","auth","dispatch","load","setLoad","handleSearch","e","preventDefault","token","res","data","type","ALERT","payload","error","response","msg","handleClose","target","value","toLowerCase","replace","opacity","length","display","map","user","_id"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\n// import { Link } from \"react-router-dom\";\nimport UserCard from \"../UserCard\";\nimport LoadIcon from \"../../images/loading.gif\";\n\nconst Search = () => {\n  const [search, setSearch] = useState(\"\");\n  const [users, setUsers] = useState([]);\n\n  const { auth } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const [load, setLoad] = useState(false);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n\n    if (!search) return;\n\n    try {\n      setLoad(true);\n      const res = await getDataAPI(`search?username=${search}`, auth.token);\n      setUsers(res.data.users);\n      setLoad(false);\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: { error: err.response.data.msg },\n      });\n    }\n  };\n\n  const handleClose = () => {\n    setSearch(\"\");\n    setUsers([]);\n  };\n\n  return (\n    <form className=\"search_form\" onSubmit={handleSearch}>\n      <input\n        type=\"text\"\n        title=\"Enter to Search\"\n        name=\"search\"\n        value={search}\n        id=\"search\"\n        onChange={(e) =>\n          setSearch(e.target.value.toLowerCase().replace(/ /g, \" \"))\n        }\n      />\n      <div className=\"search_icon\" style={{ opacity: search ? 0 : 0.3 }}>\n        <span className=\"material-icons\">search</span>\n        <span>Enter to Search</span>\n      </div>\n\n      <div\n        onClick={handleClose}\n        className=\"close_search\"\n        style={{ opacity: users.length === 0 ? 0 : 1 }}\n      >\n        &times;\n      </div>\n\n      <button type=\"submit\" style={{ display: \"none\" }}>\n        Search\n      </button>\n\n      {load && <img className=\"loading\" src={LoadIcon} alt=\"Loading\" />}\n\n      <div className=\"users\">\n        {search &&\n          users.map((user) => (\n            <UserCard\n              key={user._id}\n              user={user}\n              border=\"border\"\n              handleClose={handleClose}\n            />\n          ))}\n      </div>\n    </form>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}